| 题目                                  | 创建时间            | 标签                   |
| ------------------------------------- | ------------------- | ---------------------- |
| 阿里第一记-2018年春季前端实习在线评测 | 2018-03-27 11:27:23 | 笔试题/JavaScript/前端 |

------

胆粗粗的投了简历给阿里。一上来就一个在线测试。晚上九点左右打开的在线测评，阿里2018年春季校园招聘前端工程师实习岗位的编程题目。第一次正式面试的在线编程，30min内完成，很是紧张。

发现对JavaScript的DOM的不熟。只是会用，知其然不知其所以然。好吧，可能会用的都不过是很浅显的东西。

> 题目：实现一个方法genCssSelector，可以根据一个给定的元素生成一个CSS选择器，通过这个选择器可以快速定位到这个元素（document.querySelector(A)）

光读题目就没能动什么意思，看到下面的样例输出就大致明白意思。考察DOM树形关系，如何获取父元素。

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <div id="page">
    <div class="content main">
      <div class="refer">
        <ul>
          <li></li>
          <li></li>
        </ul>
      </div>
    </div>
  </div>
  <script type="text/javascript">
  //根据上述HTML结构，完善如下JavaScript代码中的“your code here”部分，使得click事件中的注释要求符合预期：
  var genCssSelector = function() {
    // your code here
  }
  document.addEventListener('click', function(e) {
    // 点击li时，返回：html body #page .content.main .refer ul li
    console.log(genCssSelector(e.target));
  })
  </script>
</body>
</html>
```

## 随后30min的紧张经历

前1min直接是真的懵住了。然后搜索了下“CSS选择器”关键词，出来的是CSS方面的知识。肯定是JS上的知识点，开始往JS获取标签的方向找。// 10min

往后就开始对DOM进行临时的学习了。之前确实没有对DOM这块系统学习。// 20min

动起来，留下时间也不多了。里面涉及的逻辑问题也很多，勉勉强强在30min内解决。这30min太紧张了，绝地求生的感觉。// 30min

## 铺上代码

```javaScript
var element=arguments[0];//函数传入的第一个参数，即点击元素
var parentElement=element.parentNode;//点击元素的父元素
var strGenCssSelector=element.tagName.toLowerCase()//获取点击的元素的标签名
while(parentElement.nodeName.toLowerCase()!=='#document'){
  if(parentElement.id!==''){//父元素有id
    strGenCssSelector='#'+parentElement.id+' '+strGenCssSelector;
    parentElement=parentElement.parentNode;
    continue;
  }else if(parentElement.className!=''){//父元素有class
    strGenCssSelector=' '+strGenCssSelector;
    var classList=parentElement.className.split(' ');//按照空格分隔className，存入classList数组里
    for(var i=classList.length-1;i>=0;i--){//逆序输出
      strGenCssSelector='.'+classList[i]+strGenCssSelector;
    }
    parentElement=parentElement.parentNode;
    continue;
  }else{
    strGenCssSelector=parentElement.nodeName.toLowerCase()+' '+strGenCssSelector;
    parentElement=parentElement.parentNode;
    continue;
  }
}
return strGenCssSelector;
}
```

*综合了网上的资料和答案。