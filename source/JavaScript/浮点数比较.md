| 题目       | 创建时间            | 标签       |
| :--------- | :------------------ | :--------- |
| 浮点数比较 | 2018-06-27 20:51:20 | JavaScript |

------

> 0.1 + 0.2 == 0.3  // false

在JavaScript中浮点数的运算中会出现这样的问题。

当你输出一下`0.1 + 0.2`的时候，得出的结果是

`0.30000000000000004`

在试一下`0.1 + 0.2 - 0.3`

`5.551115123125783e-17`

为了解决这个问题，在新的ES6引入了一个极小的常量`Number.EPSILON`，它表示1与大于1的最小浮点数的差。

对于64位浮点数来说，大于1的最小浮点数相当于二进制的1.00 ... 001，小数点后面有连续的51个零。

```JavaScript
function withinErrorMargin (left, right) {
  return Math.abs(left - right) < Number.EPSILON * Math.pow(2, 2);
}

0.1 + 0.2 === 0.3 // false
withinErrorMargin(0.1 + 0.2, 0.3) // true
```

还有一种方法！比较传统，就是通过浮点型转为整形再转回来。

```JavaScript
function accAdd(arg1,arg2){ 
  var r1, r2, m; 
  try {
    r1=arg1.toString().split(".")[1].length
  } catch (e) {
    r1=0
  } 
  try {
    r2=arg2.toString().split(".")[1].length
  } catch (e) {
    r2=0
  } 
  m = Math.pow(10, Math.max(r1, r2)) 
  return (arg1 * m + arg2 * m) / m;
} 
```
