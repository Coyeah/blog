| 题目         | 创建时间            | 标签            |
| ------------ | ------------------- | --------------- |
| 半夜玩玩滚动 | 2018-04-29 01:16:30 | 前端/JavaScript |

------

最近被搞到团团转，要蓄力准备九十月份了。好是好在做人比较乐观。Keep it up。

想起之前在搜CSS选择器的相关东西的时候，找到了一个题目。好吧，小小拖，到现在才去解决。题目如下。

> 在下面的样式中，当鼠标滚动的时候，box1以鼠标滚动2倍的速度运动，box2以鼠标滚动3倍的速度运动。大致效果如下图。

代码：

```HTML
<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
</head>
<body style="height: 5000px" id="wrapper">
  <div style=" width: 300px; height: 100px; background:#000;" id="box1"></div>
  <div style=" width: 300px; height: 100px; background:red;" id="box2"></div>
  <script>
  //这里是答题区
  </script>
</body>
</html>
```

答案：

```JavaScript
window.onload=function(){ 
  var y = document.body.scrollTop;
  var newstyle = document.createElement("style");
  newstyle.setAttribute("id", "addStyle");
  document.getElementsByTagName('head')[0].appendChild(newstyle);

  var box1 = document.getElementById('box1');
  var box2 = document.getElementById('box2');

  box1.style.position="fixed";
  box2.style.position="fixed";
  box2.style.top="100px";
  var preY = 0;
  var speed = 100;
  
  var scrollFunc = function(e) {
    'use strict'
    box1.style.animation = "";
    box2.style.animation = "";

    var distance = e.deltaY;
    var speed2 = distance/speed;
    var curY = document.body.scrollTop;
    var newStyle2 = document.getElementById('addStyle');

    if (distance > 0) {
      newStyle2.innerHTML = '-webkit-keyframes toDown{0%   {top:0px;}50%   {top:'+distance+'px;}100% {top:0px;}}\n'+ '@keyframes toDown {0%   {top:0px;}50%   {top:'+distance+'px;}100% {top:0px;}}\n'+'@-webkit-keyframes toDown2{0%   {top:50px;}50%   {top:'+2*distance+'px;}100% {top:50px;}}\n'+ '@keyframes toDown2 {0%   {top:50px;}50%   {top:'+2*distance+'px;}100% {top:50px;}}\n';
      box1.style.animation="toDown "+speed2/2+"s";
      box2.style.animation="toDown2 "+speed2/3+"s";
    } else {
      newStyle2.innerHTML = '@-webkit-keyframes toDown{0%   {top:0px;}50%   {top:'+(-distance)+'px;}100% {top:0px;}}\n'+ '@keyframes toDown {0%   {top:0px;}50%   {top:'+(-distance)+'px;}100% {top:0px;}}\n'+'@-webkit-keyframes toDown2{0%   {top:50px;}50%   {top:'+2*(-distance)+'px;}100% {top:50px;}}\n'+ '@keyframes toDown2 {0%   {top:50px;}50%   {top:'+2*(-distance)+'px;}100% {top:50px;}}\n';
      box1.style.animation="toDown "+(-speed2/2)+"s";
      ;
      box2.style.animation="toDown2 "+(-speed2/3)+"s";
    }
  }
  if(document.addEventListener){
    document.addEventListener('DOMMouseScroll',scrollFunc,false);
  }//W3C
  //IE/Opera/Chrome
  window.onmousewheel=document.onmousewheel=scrollFunc;
}
```
